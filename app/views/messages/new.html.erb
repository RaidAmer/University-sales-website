<h1>Compose New Message</h1>

<% if @message.errors.any? %>
  <div class="alert alert-danger">
    <h4><%= pluralize(@message.errors.count, "error") %> prohibited this message from being saved:</h4>
    <ul>
      <% @message.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_with(model: @message, local: true) do |form| %>
  <div class="field">
    <%= form.label :recipient_id, "To" %><br>
    <%= form.collection_select :recipient_id, @users, :id, :email, prompt: "Select recipient" %>
  </div>

  <div class="field" style="margin-top: 10px;">
    <%= form.label :body, "Message" %><br>
    <%= form.text_area :body, rows: 6, style: "width: 100%;" %>
  </div>

  <div class="actions" style="margin-top: 20px;">
    <%= form.submit "Send", class: "btn btn-primary" %>
  </div>
<% end %>

<%= link_to 'Back to Messages', messages_path, style: "display: inline-block; margin-top: 20px;" %>
