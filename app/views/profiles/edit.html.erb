<div class="container mt-5" style="max-width: 600px;">
  <div class="card shadow">
    <div class="card-body">
      <h2 class="card-title text-center mb-4">üìù Edit Your Profile</h2>

      <%= form_with model: current_user, url: profile_path, method: :patch, local: true, html: { multipart: true } do |f| %>
        
        <!-- Avatar Upload -->
        <div class="mb-3">
          <%= f.label :avatar, "Upload Avatar", class: "form-label" %>
          <%= f.file_field :avatar, class: "form-control", accept: "image/*" %>
          <small class="form-text text-muted">Only JPG, PNG, or other image files are allowed.</small>

          <% if current_user.avatar.attached? %>
            <div class="mt-3">
              <p><strong>Current Avatar:</strong></p>

              <% if current_user.avatar.variable? %>
                <%= image_tag current_user.avatar, width: 100, height: 100, alt: "#{current_user.avatar.filename}" %>
              <% else %>
                <p><em>File cannot be previewed. Please upload a valid image.</em></p>
                <%= link_to "Download File", url_for(current_user.avatar), class: "btn btn-sm btn-outline-secondary" %>
              <% end %>
            </div>
          <% end %>
        </div>

        <!-- Bio Textarea -->
        <div class="mb-3">
          <%= f.label :bio, "Your Bio", class: "form-label" %>
          <%= f.text_area :bio, placeholder: "Tell us about yourself...", class: "form-control", rows: 5 %>
        </div>

        <!-- Submit -->
        <div class="d-grid">
          <%= f.submit "Save Profile", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
