<h1><%= @user.first_name%> <%= @user.last_name%></h1>

<table class="table table-hover">
  <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>Price</th>
      <th>Image</th>
    </tr>
  </thead>

  <tbody id="product-table-body">
    <% @products.each do |product| %>
      <tr>
        <td class="product-name">
          <%= link_to product.name, product_dashboard_path(product) %>
        </td>
        <td><%= product.price %></td>
        <td><%= image_tag product.image, width: 100, height: 100, alt: "#{product.name} image" %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="mb-3">
  <label for="category-select" class="form-label"><strong>Select a category to add a product:</strong></label>
  <div class="input-group">
    <select id="category-select" class="form-select">
      <option value="" disabled selected>Select Category</option>
      <% Category.all.each do |category| %>
        <option value="<%= new_category_product_path(category.id) %>"><%= category.name %></option>
      <% end %>
    </select>
    <button id="go-to-new-product" class="btn btn-primary">Go</button>
  </div>
</div>

<p><%= link_to "Store", categories_path %></p>

<p><%= link_to "Home", home_path %></p>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const goButton = document.getElementById("go-to-new-product");
    const select = document.getElementById("category-select");

    goButton.addEventListener("click", function () {
      const selectedPath = select.value;
      if (selectedPath) {
        window.location.href = selectedPath;
      }
    });
  });
</script>